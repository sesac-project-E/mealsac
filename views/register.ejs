<!DOCTYPE html>
<html lang="en">
  <%- include('./head') %>
  <body>
    <h1>회원가입</h1>

    <form name="register">
      <input type="text" name="inputId" placeholder="아이디" />
      <input type="password" name="password" placeholder="비밀번호" />
      <input type="text" name="userName" placeholder="이름" />
      <button type="button" onclick="registerFunc();">회원가입</button>
    </form>

    <br />
    <a href="/">홈</a>
    <a href="/login">로그인</a>

    <script>
      async function registerFunc() {
        const form = document.forms['register'];
        try {
          const res = await axios({
            method: 'POST',
            url: '/register',
            data: {
              user_id: form.inputId.value,
              password: form.password.value,
              user_name: form.userName.value,
            },
          });
          if (res.data.result) {
             alert(`${res.data.message}`);
          } else {
            alert('회원가입을 축하드립니다');
            document.location.href = '/';
          }
        } catch (error) {
          console.log(error);
        }
      }
    </script>
  </body>
</html>
